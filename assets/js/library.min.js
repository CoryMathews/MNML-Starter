/* 
 * MNMLStarter Mobilize
 * https://github.com/CoryMathews/MNML-Starter
 * v2014-01-13
 */
$(function(){$.fn.mobilize=function(f){function g(a,b){void 0!==a&&""!==a||b();return a}function h(a,b){return g($("body").data(a),b)}function k(a,b){return g($(".navigation.mobilenav").data(a),b)}function l(a){$(window).width()<a?($(d).fadeOut(),$(c).fadeIn()):($(d).fadeIn(),$(c).fadeOut())}console.log("[mobilize]: --start--");var c=".mobilize-openmenu",d=h("mobilize-nav",function(){return".navigation"});f=k("mobilize-title",function(){return"Menu"});(function(a,b){$.each(["<strong>","</strong>","<em>","</em>"],function(b,c){for(;0<a.toLowerCase().indexOf(c);)a=a.replace(c," ")});a='<ul id="mobileSlide" class="accordian"><div class="mobilize-closeMenu">'+b+" <span>&#10006;</span></div>"+a+"</ul>";$("body").append(a);return a})($(d).html(),f);var b=$("#mobileSlide"),e=k("mobilize-width",function(){return"15rem"}),m=h("mobilize-breakpoint",function(){return"959"});b.css({left:"-"+e,width:e}).css({"-webkit-transition":"left 300ms ease","-moz-transition":"left  300ms ease",transition:"left 300ms ease"});b.state="hide";(function(){$("#mobileSlide li").each(function(){var a=$(this);$.each("w100 w95 w90 w85 w80 w75 w70 w66 w65 w60 w55 w50 w40 w45 w35 w34 w33 w30 w25 w20 w15 w10 w05".split(" "),function(b,c){a.removeClass(c)})})})();$(d).after("<div class='"+c.replace(".","")+"'>Menu &#9776;</div>");$(c).css("display","none");console.log(c+"||"+$(c).html());l(m);console.log("[mobilize]: created mobile menu");b.show=function(){console.log("[mobilize]: show");b.state="show";b.css("left","0");console.log("[mobilize]: show done")};b.hide=function(){console.log("[mobilize]: hide");b.state="hide";b.css("left","-"+e)};$(c).on("click",function(a){a.preventDefault();a.stopPropagation();console.log("[mobilize]: toggle; Current State: "+b.state);"hide"===b.state?b.show():b.hide()});$(".mobilize-closeMenu").on("click",function(){b.hide()});$("#mobileSlide li a").on("click",function(a){console.log("[mobilize]: mobile click");0<$(this).parent().children("ul").length?(a.preventDefault(),a=$(this).parent().children("ul:first"),a.hasClass("openSlide")?a.removeClass("openSlide").slideToggle(200):($(this).parent().parent().find(".openSlide").slideUp(200),a.addClass("openSlide").slideToggle(200))):(console.log("[mobilize]: redirect"),a.stopPropagation())});$(d+"  li").on("click",function(a){a.stopPropagation();$(".menuShow").removeClass("menuShow").fadeOut(200);$(this).find("ul").addClass("menuShow").fadeIn(200);console.log("[mobilize]: Clicked Link")});$(window).on("resize",function(){l(m)});$(document).on("click",function(){$(".menuShow").removeClass("menuShow").fadeOut(200);console.log("[mobilize]: Closed Link")})};$.fn.mobilize()});